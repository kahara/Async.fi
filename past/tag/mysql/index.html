<!DOCTYPE html><html dir="ltr" lang="en"><head><meta charset="utf-8"><title>mysql &#8226; Async.fi</title><meta name="description" content="Posts tagged with mysql"><meta name="generator" content="https://github.com/kahara/Async.fi"><meta name="google-site-verification" content="wUwxsPoeGyGWidP3745Hv0HNilHbivTXnkVfKi-QVW4"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="alternate" type="application/rss+xml" title="Async.fi Feed" href="/feed/"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--><style>*, h1 a, h2 a, h3 a, time a { color: #444; } h2 { margin-top: 0em; } article { margin-bottom: 1em; } time a { display: block; padding-bottom: 1em; } article * { max-width: 100%; } article pre, article code, article embed { overflow-x: auto; word-wrap: normal; white-space: pre; }</style></head><body><div class="container"><div class="row"><div class="col-md-12 page-header"><h1><a href="/">Async.fi</a></h1></div></div><div class="row"><div class="col-lg-9 col-md-9 col-sm-8 col-xs-12 col-lg-push-3 col-md-push-3 col-sm-push-4"><section><article class="post"><h2><a href="/2012/03/gone-static/" rel="bookmark" title="Permanent Link to Gone static">Gone static</a></h2><time datetime="2012-03-03T10:00:00+00:00"><a href="/2012/03/gone-static/" rel="bookmark" title="Permanent Link to Gone static">March  3, 2012</a></time>
    <p>
    <strong>Update 2:</strong> Looks like page load times, at least as reported by Pingdom, went up from what they initially were. In my own testing cached pages still load in something like 150 to 250 milliseconds but Pingdom disagees. I don't know if this is regular CloudFront performance fluctuation, some kind of impedance mismatch between Pingdom and CloudFront or "something else".
    </p>
    <p>
    <a href="/media/2012/03/Pingdom-2012-03-06.png"><img class="alignleft size-full" title="Pingdom" src="/media/2012/03/Pingdom-2012-03-06.png" alt="" /></a>
    </p>
    <p>
    <strong>Update:</strong> That really did the trick and the <a href="https://plus.google.com/112535968102790189432/posts/7trQ7LQdT36">estimated -90% page load time</a> wasn't that far off:
    </p>
    <p>
    <a href="/media/2012/03/Pingdom-2012-03-04.png"><img class="alignleft size-full" title="Pingdom" src="/media/2012/03/Pingdom-2012-03-04.png" alt="" /></a>
    </p>
    <p>
    Having been fed up with wastefulness (resource wise) and general slowness of the MySQL/PHP/WordPress/CloudFlare setup for some time, I have now moved this site to S3/CloudFront. Site is generated from an XML file (which I derived from a WordPress export dump) with a Python script that is hosted <a href="https://github.com/kahara/Async.fi">here</a>. Commenting is obviously impossible but if you for some reason need to contact me you'll find contact details on your left.
    </p>
    <p class="tags"><strong>Tagged with:</strong> <a href="/tag/aws/" rel="tag">aws</a> <a href="/tag/s3/" rel="tag">s3</a> <a href="/tag/cloudfront/" rel="tag">cloudfront</a> <a href="/tag/mysql/" rel="tag">mysql</a> <a href="/tag/php/" rel="tag">php</a> <a href="/tag/wordpress/" rel="tag">wordpress</a> </p><p class="categories"><strong>Categorised as:</strong> <a href="/category/meta/" title="View all posts in meta" rel="tag">meta</a></p><hr class="clearfix" /></article><article class="post"><h2><a href="/2012/02/daily-mysql-database-dump-back-up-to-s3/" rel="bookmark" title="Permanent Link to Daily MySQL database dump, back up to S3">Daily MySQL database dump, back up to S3</a></h2><time datetime="2012-02-11T09:24:15+00:00"><a href="/2012/02/daily-mysql-database-dump-back-up-to-s3/" rel="bookmark" title="Permanent Link to Daily MySQL database dump, back up to S3">February 11, 2012</a></time><p>I'm in the process of, or planning at least, ditching MySQL/WordPress/CloudFlare and moving to a static site hosted on S3/CloudFront. At the moment, as AWS Route 53 does not support S3 or CloudFront as an Alias Target, moving to S3/CloudFront means that I have to have an A record pointing to a web server somewhere, which in turn redirects the request to the actual site's CloudFront CNAME. I do have such a server (running Nginx), but the same thing could be as well achieved by using a service such as <a href="http://www.arecord.net/">Arecord.net</a>. This redirect means that there's no way to run a site without the www.-prefix. Which I can live with. Also, at the moment, no SSL support is available but I'm sure I can live with that too as WordPress is simply slow, and most of all a big waste of resources. Getting rid of all the dynamic parts (seriously, it's not like there are a lot of commenters around here) will make this thing run fast, at least compared to what page load times currently are. My tests show that CloudFront returns cached pages in less than 200ms.</p>

<p>So, I'm killing one extra server in the near future and putting these snippets here for my own possible future use.</p>

<em>~/.my.cnf:</em>
<pre>[client]
user = <strong>usename</strong>
password = <strong>password</strong>
host = <strong>hostname</strong>

[mysql]
database = <strong>dbname </strong></pre>
<em>&lt;dir&gt;/wp-db-backup.sh:</em>
<pre>#!/bin/sh

DBFILE="&lt;dir&gt;/<strong>dbname</strong>-`/bin/date +%s`.gz"

/usr/bin/mysqldump --quick <strong>dbname</strong> | /bin/gzip -c &gt;$DBFILE
/usr/bin/s3cmd put $DBFILE s3://<strong>bucketname</strong>/
/bin/rm $DBFILE</pre>
<em>crontab:</em>
<pre>45 3 * * * /usr/bin/nice -n 20 &lt;dir&gt;/wp-db-backup.sh &gt;/dev/null 2&gt;&amp;1</pre>
&nbsp;<p class="tags"><strong>Tagged with:</strong> <a href="/tag/mysql/" rel="tag">mysql</a> <a href="/tag/mysqldump/" rel="tag">mysqldump</a> <a href="/tag/s3/" rel="tag">s3</a> <a href="/tag/s3cmd/" rel="tag">s3cmd</a> </p><p class="categories"><strong>Categorised as:</strong> <a href="/category/snippet/" title="View all posts in snippet" rel="tag">snippet</a></p><hr class="clearfix" /></article><article class="post"><h2><a href="/2011/01/blogging-activities-migrated-to-async-fi/" rel="bookmark" title="Permanent Link to Blogging activities migrated to Async.fi">Blogging activities migrated to Async.fi</a></h2><time datetime="2011-01-22T23:28:45+00:00"><a href="/2011/01/blogging-activities-migrated-to-async-fi/" rel="bookmark" title="Permanent Link to Blogging activities migrated to Async.fi">January 22, 2011</a></time>Installing Wordpress and getting the basic settings straight was, all and all, a relatively painless experience. One downside of choosing this particular blogging platform is that I now have to run a MySQL server just for this purpose (I have no intention to use MySQL for anything else as I have actively tried to steer away from RDBMSs, even before this whole "NoSQL" thing became fashionable). I would've preferred to be able to run Wordpress on top of an SQLite backend, just because that would've kept things one step simpler, but I just could not get the <a href="http://wordpress.org/extend/plugins/pdo-for-wordpress/">"PDO (SQLite) For WordPress"</a> adapter to work with a reasonable amount of work, so I gave up and went ahead with a MySQL server install. So it's a tradeoff (what isn't?) but with all these plugins and stuff and whatnot that this system supports I think it's a pretty good deal.

I went through the old posts at <a href="http://sivuraide.blogspot.com/">sivuraide.blogspot.com</a> and imported what I thought I might find useful at least to some extent. Unsurprisingly not too many of the old posts fall to this category. Then again, the old blog is titled Code <em>Notebook</em>. The old posts did not "just work" in all places, a quick eyeballing revealed some glitches that need to be ironed out.

I installed the following plugins in addition to what was bundled:

<ul>
  <li><a href="http://crowdfavorite.com/wordpress/plugins/wordpress-mobile-edition/">WordPress Mobile Edition</a></li>
  <li><a href="http://yoast.com/wordpress/google-analytics/">Google Analytics for WordPress</a></li>
  <li><a href="http://extrafuture.com/la-petite-url/">la petite url</a></li>
  <li><a href="http://www.beautyorange.com/beauty-orange-projects/beauty-orange-wordpress-code-prettifier/">Beauty Orange WordPress Code Prettifier</a></li>
  <li><a href="http://kingdesk.com/projects/wp-typography/">wp-Typography</a></li>
</ul>
<p class="tags"><strong>Tagged with:</strong> <a href="/tag/mysql/" rel="tag">mysql</a> <a href="/tag/sqlite/" rel="tag">sqlite</a> <a href="/tag/wordpress/" rel="tag">wordpress</a> </p><p class="categories"><strong>Categorised as:</strong> <a href="/category/meta/" title="View all posts in meta" rel="tag">meta</a></p><hr class="clearfix" /></article><ul class="pager"></ul></section></div><div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 col-lg-pull-9 col-md-pull-9 col-sm-pull-8"><nav><div id="search"><form id="cse-search-box" action="https://google.com/cse"><input type="hidden" name="cx" value="013195161865949220878:l1y-926apew"/><input type="hidden" name="ie" value="UTF-8"/><div class="input-group custom-search-form"><input type="text" class="form-control" name="q"><span class="input-group-btn"><button class="btn btn-default" type="submit" name="sa"><span class="glyphicon glyphicon-search"></span></button></span></div></form></div><div id="recent-posts"><h3>Recent Posts</h3><ul><li><a href="/2020/12/wireguard-notes/" title="WireGuard Notes">WireGuard Notes </a></li><li><a href="/2016/02/building-virtual-machines-with-vmbuilder/" title="Building virtual machines with vmbuilder">Building virtual machines with vmbuilder </a></li><li><a href="/2016/01/oh2ewl/" title="OH2EWL">OH2EWL </a></li><li><a href="/2014/06/salt-notes/" title="Salt Notes">Salt Notes </a></li><li><a href="/2014/01/django-and-docker-a-marriage-made-in-heaven/" title="Django and Docker: a Marriage Made in Heaven">Django and Docker: a Marriage Made in Heaven </a></li></ul></div><div id="archives"><h3>Archives</h3><ul><li><a href="/2020/12/" title="December 2020">December 2020 <span style="color: #444;">(1)</span></a></li><li><a href="/2016/02/" title="February 2016">February 2016 <span style="color: #444;">(1)</span></a></li><li><a href="/2016/01/" title="January 2016">January 2016 <span style="color: #444;">(1)</span></a></li><li><a href="/2014/06/" title="June 2014">June 2014 <span style="color: #444;">(1)</span></a></li><li><a href="/2014/01/" title="January 2014">January 2014 <span style="color: #444;">(1)</span></a></li><li><a href="/2013/12/" title="December 2013">December 2013 <span style="color: #444;">(4)</span></a></li><li><a href="/2013/07/" title="July 2013">July 2013 <span style="color: #444;">(1)</span></a></li><li><a href="/2013/04/" title="April 2013">April 2013 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/11/" title="November 2012">November 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/08/" title="August 2012">August 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/07/" title="July 2012">July 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/06/" title="June 2012">June 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/05/" title="May 2012">May 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/04/" title="April 2012">April 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/03/" title="March 2012">March 2012 <span style="color: #444;">(2)</span></a></li><li><a href="/2012/02/" title="February 2012">February 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2012/01/" title="January 2012">January 2012 <span style="color: #444;">(1)</span></a></li><li><a href="/2011/12/" title="December 2011">December 2011 <span style="color: #444;">(1)</span></a></li><li><a href="/2011/10/" title="October 2011">October 2011 <span style="color: #444;">(4)</span></a></li><li><a href="/2011/08/" title="August 2011">August 2011 <span style="color: #444;">(4)</span></a></li><li><a href="/2011/07/" title="July 2011">July 2011 <span style="color: #444;">(3)</span></a></li><li><a href="/2011/06/" title="June 2011">June 2011 <span style="color: #444;">(2)</span></a></li><li><a href="/2011/05/" title="May 2011">May 2011 <span style="color: #444;">(4)</span></a></li><li><a href="/2011/03/" title="March 2011">March 2011 <span style="color: #444;">(2)</span></a></li><li><a href="/2011/02/" title="February 2011">February 2011 <span style="color: #444;">(1)</span></a></li><li><a href="/2011/01/" title="January 2011">January 2011 <span style="color: #444;">(3)</span></a></li><li><a href="/2010/11/" title="November 2010">November 2010 <span style="color: #444;">(1)</span></a></li><li><a href="/2010/04/" title="April 2010">April 2010 <span style="color: #444;">(1)</span></a></li><li><a href="/2009/01/" title="January 2009">January 2009 <span style="color: #444;">(2)</span></a></li><li><a href="/2008/01/" title="January 2008">January 2008 <span style="color: #444;">(1)</span></a></li><li><a href="/2006/11/" title="November 2006">November 2006 <span style="color: #444;">(1)</span></a></li><li><a href="/2006/08/" title="August 2006">August 2006 <span style="color: #444;">(1)</span></a></li><li><a href="/2006/07/" title="July 2006">July 2006 <span style="color: #444;">(2)</span></a></li></ul></div><div id="categories"><h3>Categories</h3><ul><li><a href="/category/note/" title="note">note </a></li><li><a href="/category/snippet/" title="snippet">snippet </a></li><li><a href="/category/meta/" title="meta">meta </a></li><li><a href="/category/shoutout/" title="shoutout">shoutout </a></li><li><a href="/category/experimental/" title="experimental">experimental </a></li></ul></div><div id="contact"><h3>Contact</h3><ul><li><a href="mailto:joni.kahara@async.fi">joni.kahara@async.fi</a></li><li><a href="https://plus.google.com/u/0/112535968102790189432/posts">+Joni Kähärä</a></li><li><a href="https://twitter.com/kahara">@kahara</a></li><li><a href="https://github.com/kahara">github.com/kahara</a></li></ul></div></nav></div></div><div class="row"><div class="col-md-9 col-lg-9 col-md-offset-3 col-lg-offset-3"><footer><p class="text-center"><a href="/">Async.fi</a> 2020</p> </footer></div></div></div> <!-- container --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-20895288-1', 'async.fi');ga('send', 'pageview');</script></body></html>
